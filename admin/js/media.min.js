window.audiotheme=window.audiotheme||{},jQuery(function(e){var t,a,i,n=wp.media.model.Attachment,r=wp.Uploader.defaults.filters.mime_types||[];i={init:function(){e("#wpbody").on("click",".audiotheme-media-control-choose",function(n){var r;n.preventDefault(),t=e(this).closest(".audiotheme-media-control"),r=t.data("target")||".audiotheme-media-control-target",a=0===r.indexOf("#")?e(r):t.find(r),t.data("upload-extensions")&&(wp.Uploader.defaults.filters.mime_types=[{title:AudiothemeMediaControl.audioFiles,extensions:t.data("upload-extensions")}]),i.frame().open()})},select:function(){var e=this.get("selection"),i=t.data("return-property")||"id";a.length&&a.val(e.pluck(i)),t.trigger("selectionChange.audiotheme",[e])},updateLibrarySelection:function(){var e,t,i=this.get("library").get("selection");a.length&&(t=a.val(),t&&""!==t&&-1!==t&&"0"!==t&&(e=n.get(t),e.fetch())),i.reset(e?[e]:[])},frame:function(){return this._frame?this._frame:(this._frame=wp.media({title:t.data("title")||AudiothemeMediaControl.frameTitle,library:{type:t.data("file-type")||"image"},button:{text:t.data("update-text")||AudiothemeMediaControl.frameUpdateText},multiple:t.data("select-multiple")||!1}),this._frame.on("open",this.updateLibrarySelection).on("close",function(){wp.Uploader.defaults.filters.mime_types=r}).state("library").on("select",this.select),this._frame)}},i.init()});